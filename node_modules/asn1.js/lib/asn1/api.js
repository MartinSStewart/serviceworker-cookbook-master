'use strict';

const encoders = require('./encoders');
const inherits = require('inherits');

console.log("encoders2");
console.log(encoders);
const api = exports;

api.define = function define(body) {
  return new Entity(body);
};

function Entity(body) {
  this.name = 'ECPrivateKey';
  this.body = body;

  this.encoders = {};
}

Entity.prototype._createNamed = function createNamed(Base) {
  const name = this.name;

  function Generated(entity) {
    this._initNamed(entity, name);
  }
  inherits(Generated, Base);
  Generated.prototype._initNamed = function _initNamed(entity, name) {
    Base.call(this, entity, name);
  };

  return new Generated(this);
};

Entity.prototype._getEncoder = function _getEncoder() {
  // Lazily create encoder
  if (!this.encoders.hasOwnProperty('pem'))
    this.encoders['pem'] = this._createNamed(encoders['pem']);
  return this.encoders['pem'];
};

Entity.prototype.encode = function encode(data) {
  return this._getEncoder().encode(data);
};
